\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}

\title{Лабораторная работа №7 \\ Курс: Защита информации}
\author{Патраков Николай}

\ifx\pdfoutput\undefined
\usepackage{graphicx}
\else
\usepackage[pdftex]{graphicx}
\fi

\begin{document}
	\maketitle
	\clearpage
	\tableofcontents
	\clearpage
	
\section{Цель работы}

Изучить сервис тестирования коррекности настройки SSL на сервере Qualys SSL Labs и его основные возможности.

\section{Ход работы}
\subsection{Изучение}
\paragraph{Изучить лучшие практики по развертыванию SSL/TLS}

\begin{itemize}
\item Использовать 2048-битные закрытые ключи.\\\\
Используйте 2048-битный RSA или 256-битные ECDSA закрытые ключи для всех ваших серверов. Ключи такой крепости безопасны и будут оставаться безопасными в течение значительного периода времени.

\item Защитить закрытый ключ.\\\\
Относитесь к закрытым ключам как к важным активам, предоставляя доступ к как можно меньшей группе сотрудников.

\item Обеспечить охват всех используемых доменных имен.\\\\
Убедитесь, что ваши сертификаты охватывают все доменные имена, которые вы хотите использовать на сайте.

\item Приобретать сертификаты у надежного CA центра.

\item Использовать надежные алгоритмы подписи сертификата.\\\\
Безопасность сертификата зависит от длины закрытого ключа и прочности используемой функции хеширования. Сегодня большинство сертификатов используют алгоритм SHA1, который считается слабым. 

\item Использовать безопасные протоколы. (TLS v1.0/v1.1/v1.2)

\item Использовать безопасные алгоритмы шифрования.\\\\
В данном случае подойдут симметричные алгоритмы с ключами более 128 бит.

\item Контролировать выбор алгоритма шифрования.\\\\
В SSL версии 3 и более поздних версиях протокола, клиенты отправляют список алгоритмов шифрования, которые они поддерживают, и сервер выбирает один из них для организации безопасного канала связи. Не все сервера могут делать это хорошо, так как некоторые выбирают первый поддерживаемый алгоритм из списка.

\item Использование Forward Secrecy.\\\\
Forward Secrecy — это особенность протокола, который обеспечивает безопасный обмен данными, он не зависит от закрытого ключа сервера. С алгоритмами шифрования, которые не поддерживают Forward Secrecy, возможно расшифровать ранее зашифрованные разговоры с помощью закрытого ключа сервера.

\item Отключить проверку защищенности по инициативе клиента.
\end{itemize}
\paragraph{Изучить основные уязвимости и атаки на SSL последнего времени - POODLE, HeartBleed}
\subparagraph{POODLE}
Атака POODLE работает по следующему сценарию: Взломщик отправляет свои данные на вервер по протоколу SSL3 от имени вламываемой структуры, что позволяет ему постепенно расшифровывать даные из запросов. Это возможно, так как в SSL3 нету привязки к MAC адресу.

\subparagraph{HeartBleed}
Эта атака использует уязвимость уязвимость крипотрафии OpenSSL, позволяя несанкцианированно читать память на сервере и на клиенте, в том числе и для извлечения закрытого ключа сервера
\clearpage


\subsection{Практическое задание}
Выбрать со стартовой страницы SSL Server Test один домен из списка Recent Best и один домен из списка Recent Worst - изучить отчеты, интерпретировать результаты в разделе Summary. 



\paragraph{Recent Best}
SSL Report: customer-recruit.zoho.com (74.201.154.103)
\begin{figure}[h!]
	\centering
	\includegraphics[width =\linewidth]{pic1}
	\caption{Recently best.}
\end{figure}
\begin{itemize}
	\item Поддерживает все типы протоколов TLS
	\item Поддерживает длительное форсированное защищенное соединение через  HTTPS
\end{itemize}
\clearpage

\paragraph{Recent Worst}
 SSL Report: mappiness.me (178.79.152.166)
\begin{figure}[h!]
	\centering
	\includegraphics[width =\linewidth]{pic2}
	\caption{Recently worst.}
\end{figure}
\begin{itemize}
	\item Сертификат не заверен
	\item Используется слабый алгоритм Диффи-Хэлмана
	\item Использует слабый алгоритм шифрования RC4 с современными браузерами
	\item Защищен от downgrade атак	
\end{itemize}
\clearpage

\paragraph{Самостаятельный анализ}
SSL Report: zohoplatform.com (74.201.154.174)
\begin{figure}[h!]
	\centering
	\includegraphics[width =\linewidth]{pic3}
	\caption{Zoho сервер.}
\end{figure}

\subparagraph{Интерпретировать результат в разделе summary}
\begin{itemize}
	\item Защищен от downgrade атак
	\item Поддерживат длительное форсированное защищенное соединение через  HTTPS
\end{itemize}
\clearpage
\subparagraph{Расшифровать все аббревиатуры шифров в разделе Configiration}

Вот список используемых алгоритмов.

\begin{figure}[h!]
	\centering
	\includegraphics[width =\linewidth]{pic4}
	\caption{Список алоритмов.}
\end{figure}
Расшифруем некоторые аббревиатуры.

\begin{itemize}
	\item TLS ECDHE означает Алгоритм Диффи-Хэлмана на эллиптических кривых
	\item RSA это алгоритм шифрования с открытым ключом.
	\item AES 128 так же алгоритм шифрования с длиной ключа в 128 бит
	\item GCM и CBC это два режима блочного шифрования
	\item SHA256 -это хэш функция с длиной ключа в 256 бит
\end{itemize}
\clearpage

\subparagraph{Прокомментировать большинство позиций в разделе Protocol Details}

\begin{figure}[h!]
	\centering
	\includegraphics[width =\linewidth]{pic5}
	\caption{ Protocol  details.}
\end{figure}
\begin{itemize}
	\item Строки 1-3 Перепроверка сертификата и защищенность этого процесса
	\item Строки 4-7 Уязвимости к атакам Poodle, Beast, downgrade
	\item Строка 9 Не используется слабый алгоритм RC4
	\item Строка 10 -11 уязвимость HeartBleed
	\item Строка 13 Совместимость Forward Secrecy с браузерами
	\item Строка 14 Наличие NPN\\
	в настоящее время используется для согласования использования SPDY в качестве протокола прикладного уровня на порт 443, а также для выполнения SPDY согласования версии.
	
	Основной задачей SPDY является снижение времени загрузки веб-страниц и их элементов. Это достигается за счёт расстановки приоритетов и мультиплексирования передачи нескольких файлов таким образом, чтобы требовалось только одно соединение для каждого клиента.
	\item Строка 15-16 Параметры сессии
	\item Строка 18 Реализация HSTS\\
	HSTS — механизм, активирующий форсированное защищённое соединение через протокол HTTPS. Данная политика безопасности позволяет сразу же устанавливать безопасное соединение, вместо использования HTTP-протокола. Механизм использует особый заголовок HTTP Strict-Transport-Security, для переключения пользователя, зашедшего по HTTP, на HTTPS-сервер.
	
	\item Строка 19 Реализация HPKP\\
	 Позвояет указать, какой сертификат выдан доверительным центром, а какой нет,это позволяет отклонить TLS соединения с сайтов, СА которых завведомо неправильный.Это мешает использовать таки атаки как "человек посередине".
	 
	 Функция связывает набор хэшей открытых ключей для доменного имени, например: при подключении к сайту, используя TLS браузера, гарантирует, что есть пересечение открытых ключей в компьютерной цепочке доверия и множества отпечатков, связанных с этим доменом. Эта проверка выполняется во время верификации сертификата фазы связи, до того, как данные посылаются или обрабатываются браузером.
	\item Строка 25 Совместимость с SSL2 handshake
\end{itemize}


\subparagraph{Сделать итоговый вывод о реализации SSL на заданом домене}

Конфигурация сервера отличная. Сервер использует доверенный сертификат и защищен от некоторых типов атак.Forward Secrecy реализовано не для всех браузеров, однако реализации отсутствкют только для самых старых, так что это можно не отностить к первичным проблемам. В целом, сервер имеет необходимый набор защиты.
\section{Вывод}
В ходе даной работы были изучены возможности сервиса Qualys SSL LABS. Данный сервис анализирует качество реализации защиты домена, предоставляет отчет об используемых технологиях и об известных уязвимостях сервера. Также можно посмотреть используемые протоколы.
Стоит отметить, что использование такого рода сервисов важно в коммерческом плане, но только для первичного анализа.
\end{document}